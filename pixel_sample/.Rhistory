# geom_ribbon(data = pixel.data %>%
#               filter(stand.age >= -25 & stand.age <= 94 & !is.na(Bare_Cover) & vi.year <= 2010 & fire_type_last == 1) %>%
#               group_by(stand.age) %>%
#               summarize(Bare_Cover.mean = mean(Bare_Cover),
#                         Bare_Cover.sd = sd(Bare_Cover), Bare_Cover.n = n()),
#             mapping = aes(ymin=Bare_Cover.mean - 1.96*(Bare_Cover.sd / sqrt(Bare_Cover.n)),
#                           ymax=Bare_Cover.mean + 1.96*(Bare_Cover.sd / sqrt(Bare_Cover.n)),
#                           x = stand.age, fill = "Bare"), alpha = 0.3) +
theme_bw() +
theme(axis.text.y = element_text(size = 8), axis.title.y = element_text(size = 10),
axis.title.x = element_text(size = 10), legend.position = c(0.35, 0.8), legend.background = element_rect(colour = NA, fill = NA),
legend.key = element_rect(fill = NA), axis.text.x = element_text(size = 8),
legend.title = element_text(size = 8), legend.text = element_text(size = 6)) +
# scale_colour_manual(name="Vegetation Type",values=cols, aesthetics = 'color') +
# scale_fill_manual(values = fills) +
guides(fill = "none") +
ylab(expression('Cover (%)')) + xlab('Years Since Fire') #+ facet_wrap(. ~ fire_type_last, labeller = as_labeller(c('1' = 'Wild', '2' = 'Prescribed')))
p1
p1 <- ggplot() +
# geom_line(mapping = aes(group = .geo), color = 'dark gray', size = 0.2, alpha = 0.2) +
geom_hline(yintercept = 0) + geom_vline(xintercept = 0, linetype = 'dashed') +
#Create a shrub cover line
# geom_line(data = pixel.data %>%
#             filter(stand.age >= -25 & stand.age <= 90 & !is.na(Shrub_Cover) & vi.year <= 2010 & fire_type_last == 1) %>%
#             group_by(stand.age) %>%
#             summarize(Shrub_Cover.mean = mean(Shrub_Cover)), mapping = aes(x = stand.age, y = Shrub_Cover.mean, color = 'Shrub'), size = 1) +
# #Shrub Cover 95% CI
# geom_ribbon(data = pixel.data %>%
#               filter(stand.age >= -25 & stand.age <= 90 & !is.na(Shrub_Cover) & vi.year <= 2010 & fire_type_last == 1) %>%
#               group_by(stand.age) %>%
#               summarize(Shrub_Cover.mean = mean(Shrub_Cover),
#                         Shrub_Cover.sd = sd(Shrub_Cover), Shrub_Cover.n = n()),
#             mapping = aes(ymin=Shrub_Cover.mean - 1.96*(Shrub_Cover.sd / sqrt(Shrub_Cover.n)),
#                           ymax=Shrub_Cover.mean + 1.96*(Shrub_Cover.sd / sqrt(Shrub_Cover.n)),
#                           x = stand.age, fill = "Shrub"), alpha = 0.3) +
#Create a Tree Cover line
geom_line(data = pixel.data %>%
filter(stand.age >= -25 & stand.age <= 90 & !is.na(Tree_Cover) & vi.year <= 2010 & fire_type_last == 1) %>%
group_by(stand.age, emparlc) %>%
summarize(Tree_Cover.mean = mean(Tree_Cover)), mapping = aes(x = stand.age, y = Tree_Cover.mean, color = emparlc), size = 1) +
#Tree Cover 95% CI
# geom_ribbon(data = pixel.data %>%
#               filter(stand.age >= -25 & stand.age <= 90 & !is.na(Tree_Cover) & vi.year <= 2010 & fire_type_last == 1) %>%
#               group_by(stand.age, lf_evt_2001) %>%
#               summarize(Tree_Cover.mean = mean(Tree_Cover),
#                         Tree_Cover.sd = sd(Tree_Cover), Tree_Cover.n = n()),
#             mapping = aes(ymin=Tree_Cover.mean - 1.96*(Tree_Cover.sd / sqrt(Tree_Cover.n)),
#                           ymax=Tree_Cover.mean + 1.96*(Tree_Cover.sd / sqrt(Tree_Cover.n)),
#                           x = stand.age, fill = lf_evt_2001), alpha = 0.3) +
#Create an Herb cover line
# geom_line(data = pixel.data %>%
#             filter(stand.age >= -25 & stand.age <= 90 & !is.na(Herb_Cover) & vi.year <= 2010 & fire_type_last == 1) %>%
#             group_by(stand.age) %>%
#             summarize(Herb_Cover.mean = mean(Herb_Cover)), mapping = aes(x = stand.age, y = Herb_Cover.mean, color = 'Herb'), size = 1) +
# #Herb Cover 95% CI
# geom_ribbon(data = pixel.data %>%
#               filter(stand.age >= -25 & stand.age <= 90 & !is.na(Herb_Cover) & vi.year <= 2010 & fire_type_last == 1) %>%
#               group_by(stand.age) %>%
#               summarize(Herb_Cover.mean = mean(Herb_Cover),
#                         Herb_Cover.sd = sd(Herb_Cover), Herb_Cover.n = n()),
#             mapping = aes(ymin=Herb_Cover.mean - 1.96*(Herb_Cover.sd / sqrt(Herb_Cover.n)),
#                           ymax=Herb_Cover.mean + 1.96*(Herb_Cover.sd / sqrt(Herb_Cover.n)),
#                           x = stand.age, fill = "Herb"), alpha = 0.3) +
# #Create a Bare cover line
# geom_line(data = pixel.data %>%
#             filter(stand.age >= -25 & stand.age <= 90 & !is.na(Bare_Cover) & vi.year <= 2010 & fire_type_last == 1) %>%
#             group_by(stand.age) %>%
#             summarize(Bare_Cover.mean = mean(Bare_Cover)), mapping = aes(x = stand.age, y = Bare_Cover.mean, color = 'Bare'), size = 1) +
# #Bare Cover 95% CI
# geom_ribbon(data = pixel.data %>%
#               filter(stand.age >= -25 & stand.age <= 94 & !is.na(Bare_Cover) & vi.year <= 2010 & fire_type_last == 1) %>%
#               group_by(stand.age) %>%
#               summarize(Bare_Cover.mean = mean(Bare_Cover),
#                         Bare_Cover.sd = sd(Bare_Cover), Bare_Cover.n = n()),
#             mapping = aes(ymin=Bare_Cover.mean - 1.96*(Bare_Cover.sd / sqrt(Bare_Cover.n)),
#                           ymax=Bare_Cover.mean + 1.96*(Bare_Cover.sd / sqrt(Bare_Cover.n)),
#                           x = stand.age, fill = "Bare"), alpha = 0.3) +
theme_bw() +
theme(axis.text.y = element_text(size = 8), axis.title.y = element_text(size = 10),
axis.title.x = element_text(size = 10), legend.position = c(0.35, 0.8), legend.background = element_rect(colour = NA, fill = NA),
legend.key = element_rect(fill = NA), axis.text.x = element_text(size = 8),
legend.title = element_text(size = 8), legend.text = element_text(size = 6)) +
# scale_colour_manual(name="Vegetation Type",values=cols, aesthetics = 'color') +
# scale_fill_manual(values = fills) +
guides(fill = "none") +
ylab(expression('Cover (%)')) + xlab('Years Since Fire') #+ facet_wrap(. ~ fire_type_last, labeller = as_labeller(c('1' = 'Wild', '2' = 'Prescribed')))
p1
p1 <- ggplot() +
# geom_line(mapping = aes(group = .geo), color = 'dark gray', size = 0.2, alpha = 0.2) +
geom_hline(yintercept = 0) + geom_vline(xintercept = 0, linetype = 'dashed') +
#Create a shrub cover line
# geom_line(data = pixel.data %>%
#             filter(stand.age >= -25 & stand.age <= 90 & !is.na(Shrub_Cover) & vi.year <= 2010 & fire_type_last == 1) %>%
#             group_by(stand.age) %>%
#             summarize(Shrub_Cover.mean = mean(Shrub_Cover)), mapping = aes(x = stand.age, y = Shrub_Cover.mean, color = 'Shrub'), size = 1) +
# #Shrub Cover 95% CI
# geom_ribbon(data = pixel.data %>%
#               filter(stand.age >= -25 & stand.age <= 90 & !is.na(Shrub_Cover) & vi.year <= 2010 & fire_type_last == 1) %>%
#               group_by(stand.age) %>%
#               summarize(Shrub_Cover.mean = mean(Shrub_Cover),
#                         Shrub_Cover.sd = sd(Shrub_Cover), Shrub_Cover.n = n()),
#             mapping = aes(ymin=Shrub_Cover.mean - 1.96*(Shrub_Cover.sd / sqrt(Shrub_Cover.n)),
#                           ymax=Shrub_Cover.mean + 1.96*(Shrub_Cover.sd / sqrt(Shrub_Cover.n)),
#                           x = stand.age, fill = "Shrub"), alpha = 0.3) +
#Create a Tree Cover line
geom_line(data = pixel.data %>%
filter(stand.age >= -25 & stand.age <= 90 & !is.na(Tree_Cover) & vi.year <= 2010 & fire_type_last == 1) %>%
group_by(stand.age, emaprlc) %>%
summarize(Tree_Cover.mean = mean(Tree_Cover)), mapping = aes(x = stand.age, y = Tree_Cover.mean, color = emaprlc), size = 1) +
#Tree Cover 95% CI
# geom_ribbon(data = pixel.data %>%
#               filter(stand.age >= -25 & stand.age <= 90 & !is.na(Tree_Cover) & vi.year <= 2010 & fire_type_last == 1) %>%
#               group_by(stand.age, lf_evt_2001) %>%
#               summarize(Tree_Cover.mean = mean(Tree_Cover),
#                         Tree_Cover.sd = sd(Tree_Cover), Tree_Cover.n = n()),
#             mapping = aes(ymin=Tree_Cover.mean - 1.96*(Tree_Cover.sd / sqrt(Tree_Cover.n)),
#                           ymax=Tree_Cover.mean + 1.96*(Tree_Cover.sd / sqrt(Tree_Cover.n)),
#                           x = stand.age, fill = lf_evt_2001), alpha = 0.3) +
#Create an Herb cover line
# geom_line(data = pixel.data %>%
#             filter(stand.age >= -25 & stand.age <= 90 & !is.na(Herb_Cover) & vi.year <= 2010 & fire_type_last == 1) %>%
#             group_by(stand.age) %>%
#             summarize(Herb_Cover.mean = mean(Herb_Cover)), mapping = aes(x = stand.age, y = Herb_Cover.mean, color = 'Herb'), size = 1) +
# #Herb Cover 95% CI
# geom_ribbon(data = pixel.data %>%
#               filter(stand.age >= -25 & stand.age <= 90 & !is.na(Herb_Cover) & vi.year <= 2010 & fire_type_last == 1) %>%
#               group_by(stand.age) %>%
#               summarize(Herb_Cover.mean = mean(Herb_Cover),
#                         Herb_Cover.sd = sd(Herb_Cover), Herb_Cover.n = n()),
#             mapping = aes(ymin=Herb_Cover.mean - 1.96*(Herb_Cover.sd / sqrt(Herb_Cover.n)),
#                           ymax=Herb_Cover.mean + 1.96*(Herb_Cover.sd / sqrt(Herb_Cover.n)),
#                           x = stand.age, fill = "Herb"), alpha = 0.3) +
# #Create a Bare cover line
# geom_line(data = pixel.data %>%
#             filter(stand.age >= -25 & stand.age <= 90 & !is.na(Bare_Cover) & vi.year <= 2010 & fire_type_last == 1) %>%
#             group_by(stand.age) %>%
#             summarize(Bare_Cover.mean = mean(Bare_Cover)), mapping = aes(x = stand.age, y = Bare_Cover.mean, color = 'Bare'), size = 1) +
# #Bare Cover 95% CI
# geom_ribbon(data = pixel.data %>%
#               filter(stand.age >= -25 & stand.age <= 94 & !is.na(Bare_Cover) & vi.year <= 2010 & fire_type_last == 1) %>%
#               group_by(stand.age) %>%
#               summarize(Bare_Cover.mean = mean(Bare_Cover),
#                         Bare_Cover.sd = sd(Bare_Cover), Bare_Cover.n = n()),
#             mapping = aes(ymin=Bare_Cover.mean - 1.96*(Bare_Cover.sd / sqrt(Bare_Cover.n)),
#                           ymax=Bare_Cover.mean + 1.96*(Bare_Cover.sd / sqrt(Bare_Cover.n)),
#                           x = stand.age, fill = "Bare"), alpha = 0.3) +
theme_bw() +
theme(axis.text.y = element_text(size = 8), axis.title.y = element_text(size = 10),
axis.title.x = element_text(size = 10), legend.position = c(0.35, 0.8), legend.background = element_rect(colour = NA, fill = NA),
legend.key = element_rect(fill = NA), axis.text.x = element_text(size = 8),
legend.title = element_text(size = 8), legend.text = element_text(size = 6)) +
# scale_colour_manual(name="Vegetation Type",values=cols, aesthetics = 'color') +
# scale_fill_manual(values = fills) +
guides(fill = "none") +
ylab(expression('Cover (%)')) + xlab('Years Since Fire') #+ facet_wrap(. ~ fire_type_last, labeller = as_labeller(c('1' = 'Wild', '2' = 'Prescribed')))
p1
p1 <- ggplot() +
# geom_line(mapping = aes(group = .geo), color = 'dark gray', size = 0.2, alpha = 0.2) +
geom_hline(yintercept = 0) + geom_vline(xintercept = 0, linetype = 'dashed') +
#Create a shrub cover line
# geom_line(data = pixel.data %>%
#             filter(stand.age >= -25 & stand.age <= 90 & !is.na(Shrub_Cover) & vi.year <= 2010 & fire_type_last == 1) %>%
#             group_by(stand.age) %>%
#             summarize(Shrub_Cover.mean = mean(Shrub_Cover)), mapping = aes(x = stand.age, y = Shrub_Cover.mean, color = 'Shrub'), size = 1) +
# #Shrub Cover 95% CI
# geom_ribbon(data = pixel.data %>%
#               filter(stand.age >= -25 & stand.age <= 90 & !is.na(Shrub_Cover) & vi.year <= 2010 & fire_type_last == 1) %>%
#               group_by(stand.age) %>%
#               summarize(Shrub_Cover.mean = mean(Shrub_Cover),
#                         Shrub_Cover.sd = sd(Shrub_Cover), Shrub_Cover.n = n()),
#             mapping = aes(ymin=Shrub_Cover.mean - 1.96*(Shrub_Cover.sd / sqrt(Shrub_Cover.n)),
#                           ymax=Shrub_Cover.mean + 1.96*(Shrub_Cover.sd / sqrt(Shrub_Cover.n)),
#                           x = stand.age, fill = "Shrub"), alpha = 0.3) +
#Create a Tree Cover line
geom_line(data = pixel.data %>%
filter(stand.age >= -25 & stand.age <= 90 & !is.na(Tree_Cover) & vi.year <= 2010 & fire_type_last == 1) %>%
group_by(stand.age, emaprlc) %>%
summarize(Tree_Cover.mean = mean(Tree_Cover)), mapping = aes(x = stand.age, y = Tree_Cover.mean, color = as.factor(emaprlc)), size = 1) +
#Tree Cover 95% CI
# geom_ribbon(data = pixel.data %>%
#               filter(stand.age >= -25 & stand.age <= 90 & !is.na(Tree_Cover) & vi.year <= 2010 & fire_type_last == 1) %>%
#               group_by(stand.age, lf_evt_2001) %>%
#               summarize(Tree_Cover.mean = mean(Tree_Cover),
#                         Tree_Cover.sd = sd(Tree_Cover), Tree_Cover.n = n()),
#             mapping = aes(ymin=Tree_Cover.mean - 1.96*(Tree_Cover.sd / sqrt(Tree_Cover.n)),
#                           ymax=Tree_Cover.mean + 1.96*(Tree_Cover.sd / sqrt(Tree_Cover.n)),
#                           x = stand.age, fill = lf_evt_2001), alpha = 0.3) +
#Create an Herb cover line
# geom_line(data = pixel.data %>%
#             filter(stand.age >= -25 & stand.age <= 90 & !is.na(Herb_Cover) & vi.year <= 2010 & fire_type_last == 1) %>%
#             group_by(stand.age) %>%
#             summarize(Herb_Cover.mean = mean(Herb_Cover)), mapping = aes(x = stand.age, y = Herb_Cover.mean, color = 'Herb'), size = 1) +
# #Herb Cover 95% CI
# geom_ribbon(data = pixel.data %>%
#               filter(stand.age >= -25 & stand.age <= 90 & !is.na(Herb_Cover) & vi.year <= 2010 & fire_type_last == 1) %>%
#               group_by(stand.age) %>%
#               summarize(Herb_Cover.mean = mean(Herb_Cover),
#                         Herb_Cover.sd = sd(Herb_Cover), Herb_Cover.n = n()),
#             mapping = aes(ymin=Herb_Cover.mean - 1.96*(Herb_Cover.sd / sqrt(Herb_Cover.n)),
#                           ymax=Herb_Cover.mean + 1.96*(Herb_Cover.sd / sqrt(Herb_Cover.n)),
#                           x = stand.age, fill = "Herb"), alpha = 0.3) +
# #Create a Bare cover line
# geom_line(data = pixel.data %>%
#             filter(stand.age >= -25 & stand.age <= 90 & !is.na(Bare_Cover) & vi.year <= 2010 & fire_type_last == 1) %>%
#             group_by(stand.age) %>%
#             summarize(Bare_Cover.mean = mean(Bare_Cover)), mapping = aes(x = stand.age, y = Bare_Cover.mean, color = 'Bare'), size = 1) +
# #Bare Cover 95% CI
# geom_ribbon(data = pixel.data %>%
#               filter(stand.age >= -25 & stand.age <= 94 & !is.na(Bare_Cover) & vi.year <= 2010 & fire_type_last == 1) %>%
#               group_by(stand.age) %>%
#               summarize(Bare_Cover.mean = mean(Bare_Cover),
#                         Bare_Cover.sd = sd(Bare_Cover), Bare_Cover.n = n()),
#             mapping = aes(ymin=Bare_Cover.mean - 1.96*(Bare_Cover.sd / sqrt(Bare_Cover.n)),
#                           ymax=Bare_Cover.mean + 1.96*(Bare_Cover.sd / sqrt(Bare_Cover.n)),
#                           x = stand.age, fill = "Bare"), alpha = 0.3) +
theme_bw() +
theme(axis.text.y = element_text(size = 8), axis.title.y = element_text(size = 10),
axis.title.x = element_text(size = 10), legend.position = c(0.35, 0.8), legend.background = element_rect(colour = NA, fill = NA),
legend.key = element_rect(fill = NA), axis.text.x = element_text(size = 8),
legend.title = element_text(size = 8), legend.text = element_text(size = 6)) +
# scale_colour_manual(name="Vegetation Type",values=cols, aesthetics = 'color') +
# scale_fill_manual(values = fills) +
guides(fill = "none") +
ylab(expression('Cover (%)')) + xlab('Years Since Fire') #+ facet_wrap(. ~ fire_type_last, labeller = as_labeller(c('1' = 'Wild', '2' = 'Prescribed')))
p1
p1 <- ggplot() +
# geom_line(mapping = aes(group = .geo), color = 'dark gray', size = 0.2, alpha = 0.2) +
geom_hline(yintercept = 0) + geom_vline(xintercept = 0, linetype = 'dashed') +
#Create a shrub cover line
# geom_line(data = pixel.data %>%
#             filter(stand.age >= -25 & stand.age <= 90 & !is.na(Shrub_Cover) & vi.year <= 2010 & fire_type_last == 1) %>%
#             group_by(stand.age) %>%
#             summarize(Shrub_Cover.mean = mean(Shrub_Cover)), mapping = aes(x = stand.age, y = Shrub_Cover.mean, color = 'Shrub'), size = 1) +
# #Shrub Cover 95% CI
# geom_ribbon(data = pixel.data %>%
#               filter(stand.age >= -25 & stand.age <= 90 & !is.na(Shrub_Cover) & vi.year <= 2010 & fire_type_last == 1) %>%
#               group_by(stand.age) %>%
#               summarize(Shrub_Cover.mean = mean(Shrub_Cover),
#                         Shrub_Cover.sd = sd(Shrub_Cover), Shrub_Cover.n = n()),
#             mapping = aes(ymin=Shrub_Cover.mean - 1.96*(Shrub_Cover.sd / sqrt(Shrub_Cover.n)),
#                           ymax=Shrub_Cover.mean + 1.96*(Shrub_Cover.sd / sqrt(Shrub_Cover.n)),
#                           x = stand.age, fill = "Shrub"), alpha = 0.3) +
#Create a Tree Cover line
geom_line(data = pixel.data %>%
filter(stand.age >= -25 & stand.age <= 90 & !is.na(Tree_Cover) & vi.year <= 2010 & fire_type_last == 1) %>%
group_by(stand.age, lf_evt_2001) %>%
summarize(Tree_Cover.mean = mean(Tree_Cover)), mapping = aes(x = stand.age, y = Tree_Cover.mean, color = as.factor(lf_evt_2001)), size = 1) +
#Tree Cover 95% CI
# geom_ribbon(data = pixel.data %>%
#               filter(stand.age >= -25 & stand.age <= 90 & !is.na(Tree_Cover) & vi.year <= 2010 & fire_type_last == 1) %>%
#               group_by(stand.age, lf_evt_2001) %>%
#               summarize(Tree_Cover.mean = mean(Tree_Cover),
#                         Tree_Cover.sd = sd(Tree_Cover), Tree_Cover.n = n()),
#             mapping = aes(ymin=Tree_Cover.mean - 1.96*(Tree_Cover.sd / sqrt(Tree_Cover.n)),
#                           ymax=Tree_Cover.mean + 1.96*(Tree_Cover.sd / sqrt(Tree_Cover.n)),
#                           x = stand.age, fill = lf_evt_2001), alpha = 0.3) +
#Create an Herb cover line
# geom_line(data = pixel.data %>%
#             filter(stand.age >= -25 & stand.age <= 90 & !is.na(Herb_Cover) & vi.year <= 2010 & fire_type_last == 1) %>%
#             group_by(stand.age) %>%
#             summarize(Herb_Cover.mean = mean(Herb_Cover)), mapping = aes(x = stand.age, y = Herb_Cover.mean, color = 'Herb'), size = 1) +
# #Herb Cover 95% CI
# geom_ribbon(data = pixel.data %>%
#               filter(stand.age >= -25 & stand.age <= 90 & !is.na(Herb_Cover) & vi.year <= 2010 & fire_type_last == 1) %>%
#               group_by(stand.age) %>%
#               summarize(Herb_Cover.mean = mean(Herb_Cover),
#                         Herb_Cover.sd = sd(Herb_Cover), Herb_Cover.n = n()),
#             mapping = aes(ymin=Herb_Cover.mean - 1.96*(Herb_Cover.sd / sqrt(Herb_Cover.n)),
#                           ymax=Herb_Cover.mean + 1.96*(Herb_Cover.sd / sqrt(Herb_Cover.n)),
#                           x = stand.age, fill = "Herb"), alpha = 0.3) +
# #Create a Bare cover line
# geom_line(data = pixel.data %>%
#             filter(stand.age >= -25 & stand.age <= 90 & !is.na(Bare_Cover) & vi.year <= 2010 & fire_type_last == 1) %>%
#             group_by(stand.age) %>%
#             summarize(Bare_Cover.mean = mean(Bare_Cover)), mapping = aes(x = stand.age, y = Bare_Cover.mean, color = 'Bare'), size = 1) +
# #Bare Cover 95% CI
# geom_ribbon(data = pixel.data %>%
#               filter(stand.age >= -25 & stand.age <= 94 & !is.na(Bare_Cover) & vi.year <= 2010 & fire_type_last == 1) %>%
#               group_by(stand.age) %>%
#               summarize(Bare_Cover.mean = mean(Bare_Cover),
#                         Bare_Cover.sd = sd(Bare_Cover), Bare_Cover.n = n()),
#             mapping = aes(ymin=Bare_Cover.mean - 1.96*(Bare_Cover.sd / sqrt(Bare_Cover.n)),
#                           ymax=Bare_Cover.mean + 1.96*(Bare_Cover.sd / sqrt(Bare_Cover.n)),
#                           x = stand.age, fill = "Bare"), alpha = 0.3) +
theme_bw() +
theme(axis.text.y = element_text(size = 8), axis.title.y = element_text(size = 10),
axis.title.x = element_text(size = 10), legend.position = c(0.35, 0.8), legend.background = element_rect(colour = NA, fill = NA),
legend.key = element_rect(fill = NA), axis.text.x = element_text(size = 8),
legend.title = element_text(size = 8), legend.text = element_text(size = 6)) +
# scale_colour_manual(name="Vegetation Type",values=cols, aesthetics = 'color') +
# scale_fill_manual(values = fills) +
guides(fill = "none") +
ylab(expression('Cover (%)')) + xlab('Years Since Fire') #+ facet_wrap(. ~ fire_type_last, labeller = as_labeller(c('1' = 'Wild', '2' = 'Prescribed')))
p1
p10 <- ggplot() +
# geom_line(mapping = aes(group = .geo), color = 'dark gray', size = 0.2, alpha = 0.2) +
geom_hline(yintercept = 0) + geom_vline(xintercept = 0, linetype = 'dashed') +
#Create a Tree Cover line
geom_line(data = pixel.data %>%
filter(stand.age >= -25 & stand.age <= 90 & !is.na(Tree_Cover) & vi.year <= 2010 & fire_type_last == 1) %>%
group_by(stand.age, lf_evt_2001) %>%
summarize(Tree_Cover.mean = mean(Tree_Cover), count = n()), mapping = aes(x = stand.age, y = count, color = as.factor(lf_evt_2001)), size = 1) +
theme_bw() +
theme(axis.text.y = element_text(size = 8), axis.title.y = element_text(size = 10),
axis.title.x = element_text(size = 10), legend.position = c(0.35, 0.8), legend.background = element_rect(colour = NA, fill = NA),
legend.key = element_rect(fill = NA), axis.text.x = element_text(size = 8),
legend.title = element_text(size = 8), legend.text = element_text(size = 6)) +
# scale_colour_manual(name="Vegetation Type",values=cols, aesthetics = 'color') +
# scale_fill_manual(values = fills) +
guides(fill = "none") +
ylab(expression('Cover (%)')) + xlab('Years Since Fire') #+ facet_wrap(. ~ fire_type_last, labeller = as_labeller(c('1' = 'Wild', '2' = 'Prescribed')))
p10
p <- c('reticulate', 'rgee', 'rgeeExtra','raster', 'sf', 'ggplot2', 'RStoolbox', 'viridis', 'tigris')
# # install.packages('terra',repo='https://cran.r-project.org/')
# library(tigris)
# library(ggplot2)
# library(RStoolbox)
# install.packages('RStoolbox',repo='https://cran.r-project.org/')
lapply(p,require,character.only=TRUE)
# library(raster)
#Set the working directory
setwd('C:/Users/can02/mystuff/fireDieoff/pixel_sample')
#Set up a python environment
# ee_install(py_env = "rgee")
#Upgrade the python API version
# ee_install_upgrade(version = '0.1.312')
#Intialize RGEE
# ee_Initialize(user = 'cnorlen@uci.edu', drive = TRUE)
#Install a python package
# py_install("jsbeautifier")
#Import a python package
# regex <- import("regex")
# jsb <- import("jsbeautifier")
#Load a GEE package
# palettes <- module('users/gena/packages:palettes')
# js.batch <- 'https://github.com/fitoprincipe/geetools-code-editor/blob/master/batch'
# batch <- module(js.batch)
# batch
#Some how the LST module works, but other ones don't
# lsmod <- 'users/sofiaermida/landsat_smw_lst:modules/Landsat_LST.js'
# mod <- module(lsmod)
# mod
# geom <- ee$Geometry$Rectangle(-8.91, 40.0, -8.3, 40.4)
# LST <- mod$collection("L8", "2018-05-15", "2018-05-31", geom, TRUE)
# print(LST$first)
# LST$mean
# Map$addLayer(LST$first, {}, 'LST')
# frap.year <- ee$Image('users/cnorlen/Fire_Dieoff/frap_year_bin')
# yearViz <- list(
#   min = 1919,
#   max = 2020,
#   palette = c("yellow", "orange", "red")
# )
# Map$addLayer()
# Map$addLayer(frap.year, yearViz, 'FRAP Year Data')
#Setting variable for ESPG 5070, proj4 crs
c <- raster::crs("+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs")
#Add California Boundary shape file
us_states_20m <- states(cb = TRUE, resolution = "20m", class = "sf")
us_states_20m <- st_transform(us_states_20m, c)
ca_20m <- us_states_20m[us_states_20m$NAME == "California", ]
ca_20m <- st_as_sf(ca_20m)
ca_20m <- st_transform(ca_20m, c)
#Select USFS EcoRegion for South Sierra Nevada
usfs_in <- "D:\\Large_Files\\USFS\\data\\subsections"
usfs.regions <- st_read(file.path(usfs_in, 'S_USA.EcomapSubsections.shp'))
usfs.sierra <- subset(usfs.regions, MAP_UNIT_S == 'M261Ep' | MAP_UNIT_S == 'M261Eq' | MAP_UNIT_S == 'M261Es' | MAP_UNIT_S == 'M261Eu' | MAP_UNIT_S == 'M261Er' | MAP_UNIT_S == 'M261Eo') # | MAP_UNIT_S == 'M261Ev') #MAP_UNIT_S == 'M261Et' |
#Merge Sierra Nevada polygons into one larger polygon
usfs.sierra.union <- usfs.sierra %>% st_union()
#Export the FRAP raster
# frap.raster <- ee_as_raster(image = frap.year, via = 'drive', container = 'Fire_Dieoff')
#Load in the exported data for my hard drive
data_in <- 'D://Fire_Dieoff'
files <- list.files(data_in)
files
frap.year.1990 <- raster::raster(file.path(data_in, files[16]))
frap.year.1990.m <- frap.year.1990 == 0
frap.year.1990.mask <-  raster::mask(frap.year.1990, mask = frap.year.1990.m, maskvalue = 1)
frap.year.2000 <- raster::raster(file.path(data_in, files[17]))
frap.year.2000.m <- frap.year.2000 == 0
frap.year.2000.mask <-  raster::mask(frap.year.2000, mask = frap.year.2000.m, maskvalue = 1)
frap.year.2010 <- raster::raster(file.path(data_in, files[18]))
frap.year.2010.m <- frap.year.2010== 0
frap.year.2010.mask <-  raster::mask(frap.year.2010, mask = frap.year.2010.m, maskvalue = 1)
frap.year.2020 <- raster::raster(file.path(data_in, files[19]))
frap.year.2020.m <- frap.year.2020== 0
frap.year.2020.mask <-  raster::mask(frap.year.2020, mask = frap.year.2020.m, maskvalue = 1)
p1 <- ggplot() +
ggR(img = frap.year.1990.mask, layer = 1, maxpixels = 1e6, geom_raster = TRUE, ggLayer = TRUE) +
geom_sf(data = ca_20m, color='black', size = 0.2, fill=NA) +
geom_sf(data = usfs.sierra.union, color='black', size = 0.4,  fill = NA) +
coord_sf() + xlab('longitude') + ylab('latitude') +
scale_fill_viridis(name = 'Fire Year', option = 'inferno', na.value = NA) + theme_bw() +
theme(
legend.justification = c(1, 0),
legend.position = c(0.89, 0.6),
legend.text = element_text(size = 6),
legend.title = element_text(size = 8),
legend.direction = "vertical")
p1
ggsave(filename = 'Fig36_FRAP_year_1990_map.png', height=16, width= 12, units = 'cm', dpi=900)
#Make a figure of the raster
p2 <- ggplot() +
ggR(img = frap.year.2000.mask, layer = 1, maxpixels = 1e6, geom_raster = TRUE, ggLayer = TRUE) +
geom_sf(data = ca_20m, color='black', size = 0.2, fill=NA) +
geom_sf(data = usfs.sierra.union, color='black', size = 0.4,  fill = NA) +
coord_sf() + xlab('longitude') + ylab('latitude') +
scale_fill_viridis(name = 'Fire Year', option = 'inferno', na.value = NA) + theme_bw() +
theme(
legend.justification = c(1, 0),
legend.position = c(0.89, 0.6),
legend.text = element_text(size = 6),
legend.title = element_text(size = 8),
legend.direction = "vertical")
p2
ggsave(filename = 'Fig37_FRAP_year_2000_map.png', height=16, width= 12, units = 'cm', dpi=900)
p3 <- ggplot() +
ggR(img = frap.year.2010.mask, layer = 1, maxpixels = 1e6, geom_raster = TRUE, ggLayer = TRUE) +
geom_sf(data = ca_20m, color='black', size = 0.2, fill=NA) +
geom_sf(data = usfs.sierra.union, color='black', size = 0.4,  fill = NA) +
coord_sf() + xlab('longitude') + ylab('latitude') +
scale_fill_viridis(name = 'Fire Year', option = 'inferno', na.value = NA) + theme_bw() +
theme(
legend.justification = c(1, 0),
legend.position = c(0.89, 0.6),
legend.text = element_text(size = 6),
legend.title = element_text(size = 8),
legend.direction = "vertical")
p3
ggsave(filename = 'Fig38_FRAP_year_2010_map.png', height=16, width= 12, units = 'cm', dpi=900)
p4 <- ggplot() +
ggR(img = frap.year.2020.mask, layer = 1, maxpixels = 1e6, geom_raster = TRUE, ggLayer = TRUE) +
geom_sf(data = ca_20m, color='black', size = 0.2, fill=NA) +
geom_sf(data = usfs.sierra.union, color='black', size = 0.4,  fill = NA) +
coord_sf() + xlab('longitude') + ylab('latitude') +
scale_fill_viridis(name = 'Fire Year', option = 'inferno', na.value = NA) + theme_bw() +
theme(
legend.justification = c(1, 0),
legend.position = c(0.89, 0.6),
legend.text = element_text(size = 6),
legend.title = element_text(size = 8),
legend.direction = "vertical")
p4
ggsave(filename = 'Fig39_FRAP_year_2020_map.png', height=16, width= 12, units = 'cm', dpi=900)
frap.type.1990 <- raster::raster(file.path(data_in, files[12]))
frap.type.1990.m <- frap.type.1990 == 0
frap.type.1990.mask <-  raster::mask(frap.type.1990, mask = frap.type.1990.m, maskvalue = 1)
frap.type.2000 <- raster::raster(file.path(data_in, files[13]))
frap.type.2000.m <- frap.type.2000 == 0
frap.type.2000.mask <-  raster::mask(frap.type.2000, mask = frap.type.2000.m, maskvalue = 1)
frap.type.2010 <- raster::raster(file.path(data_in, files[14]))
frap.type.2010.m <- frap.type.2010== 0
frap.type.2010.mask <-  raster::mask(frap.type.2010, mask = frap.type.2010.m, maskvalue = 1)
frap.type.2020 <- raster::raster(file.path(data_in, files[15]))
frap.type.2020.m <- frap.type.2020== 0
frap.type.2020.mask <-  raster::mask(frap.type.2020, mask = frap.type.2020.m, maskvalue = 1)
p5 <- ggplot() +
ggR(img = frap.count.1990.mask, layer = 1, maxpixels = 1e6, geom_raster = TRUE, ggLayer = TRUE, forceCat = TRUE) +
geom_sf(data = ca_20m, color='black', size = 0.2, fill=NA) +
geom_sf(data = usfs.sierra.union, color='black', size = 0.4,  fill = NA) +
coord_sf() + xlab('longitude') + ylab('latitude') +
scale_fill_viridis(name = '# of Fires', option = 'viridis', direction = -1, na.value = NA, discrete = TRUE, na.translate = F) + theme_bw() +
theme(
legend.justification = c(1, 0),
legend.position = c(0.89, 0.5),
legend.text = element_text(size = 6),
legend.title = element_text(size = 8),
legend.direction = "vertical")
p5
ggsave(filename = 'Fig39_FRAP_count_1990_map.png', height=16, width= 12, units = 'cm', dpi=900)
p6 <- ggplot() +
ggR(img = frap.count.2000.mask, layer = 1, maxpixels = 1e6, geom_raster = TRUE, ggLayer = TRUE, forceCat = TRUE) +
geom_sf(data = ca_20m, color='black', size = 0.2, fill=NA) +
geom_sf(data = usfs.sierra.union, color='black', size = 0.4,  fill = NA) +
coord_sf() + xlab('longitude') + ylab('latitude') +
scale_fill_viridis(name = '# of Fires', option = 'viridis', direction = -1, na.value = NA, discrete = TRUE, na.translate = F) + theme_bw() +
theme(
legend.justification = c(1, 0),
legend.position = c(0.89, 0.5),
legend.text = element_text(size = 6),
legend.title = element_text(size = 8),
legend.direction = "vertical")
p6
ggsave(filename = 'Fig40_FRAP_count_2000_map.png', height=16, width= 12, units = 'cm', dpi=900)
p7 <- ggplot() +
ggR(img = frap.count.2010.mask, layer = 1, maxpixels = 1e6, geom_raster = TRUE, ggLayer = TRUE, forceCat = TRUE) +
geom_sf(data = ca_20m, color='black', size = 0.2, fill=NA) +
geom_sf(data = usfs.sierra.union, color='black', size = 0.4,  fill = NA) +
coord_sf() + xlab('longitude') + ylab('latitude') +
scale_fill_viridis(name = '# of Fires', option = 'viridis', direction = -1, na.value = NA, discrete = TRUE, na.translate = F) + theme_bw() +
theme(
legend.justification = c(1, 0),
legend.position = c(0.89, 0.5),
legend.text = element_text(size = 6),
legend.title = element_text(size = 8),
legend.direction = "vertical")
p7
ggsave(filename = 'Fig41_FRAP_count_2010_map.png', height=16, width= 12, units = 'cm', dpi=900)
p8 <- ggplot() +
ggR(img = frap.count.2020.mask, layer = 1, maxpixels = 1e6, geom_raster = TRUE, ggLayer = TRUE, forceCat = TRUE) +
geom_sf(data = ca_20m, color='black', size = 0.2, fill=NA) +
geom_sf(data = usfs.sierra.union, color='black', size = 0.4,  fill = NA) +
coord_sf() + xlab('longitude') + ylab('latitude') +
scale_fill_viridis(name = '# of Fires', option = 'viridis', direction = -1, na.value = NA, discrete = TRUE, na.translate = F) + theme_bw() +
theme(
legend.justification = c(1, 0),
legend.position = c(0.89, 0.5),
legend.text = element_text(size = 6),
legend.title = element_text(size = 8),
legend.direction = "vertical")
p8
ggsave(filename = 'Fig42_FRAP_count_2020_map.png', height=16, width= 12, units = 'cm', dpi=900)
